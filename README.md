Веб-сервис прогноза погоды для маршрута

Этот проект представляет собой веб-сервис для путешественников, который помогает планировать поездки с учётом погодных условий. Пользователь вводит начальную и конечную точки маршрута, а сервис получает данные о погоде с помощью AccuWeather API и определяет, являются ли условия неблагоприятными. Основные метеорологические параметры включают:

- Температуру воздуха
- Скорость ветра
- Влажность
- Вероятность дождя

Сервис анализирует данные и предоставляет прогноз погоды для каждой точки маршрута, а также выводит предупреждения о плохих погодных условиях.

Функциональные возможности:

- Принимает начальный и конечный города маршрута через веб-интерфейс.
- Получает прогноз погоды с использованием AccuWeather API.
- Определяет плохие погодные условия на основе:
- Температуры ниже -35°C или выше 30°C.
- Скорости ветра выше 50 км/ч.
- Вероятности дождя выше 70%.
- Обрабатывает ошибки ввода и взаимодействия с API, обеспечивая стабильность системы.
- Возвращает пользователю понятные сообщения с информацией о погоде и её влиянии на маршрут.

Обработанные ошибки и их влияние на систему

1. Ошибка: Пустые значения в полях ввода

Причина: Пользователь не ввёл название одного или обоих городов.

Серверная проверка данных:

    if not start_city or not end_city
        return "Ошибка: Пожалуйста, введите оба города."

Влияние: Система сообщает пользователю об ошибке и не отправляет пустой запрос к API, предотвращая ненужные вызовы.

2. Ошибка: Город не найден

Причина: Введённый город не распознаётся AccuWeather API.


    location_key = get_location_key(city)
    if not location_key:
        results.append({"city": city, "error": "Город не найден"})



Сообщение пользователю: "Город не найден".

Влияние: Система корректно сообщает об ошибке, продолжает выполнение для других городов.

3. Ошибка: Проблемы с подключением к API

Причина: Недоступность API, неверный ключ или проблемы с сетью.



    try:
        response = requests.get(url)
        response.raise_for_status()
    except Exception as e:
        return f"Ошибка: {str(e)}"



Сообщение пользователю:
"Ошибка при получении данных о погоде".

Влияние: Система остаётся устойчивой, не прерывает выполнение программы и сообщает пользователю об ошибке.

4. Ошибка: Нулевые значения скорости ветра и вероятности дождя

Причина: AccuWeather API не всегда возвращает значения для Wind и RainProbability.


    has_precipitation = current_data.get("HasPrecipitation", False)
    precipitation_type = current_data.get("PrecipitationType", "")
    if has_precipitation and precipitation_type == "Rain":
        rain_probability = 100
    else:
        rain_probability = forecast.get("Day", {}).get("RainProbability", 0)



Сообщение пользователю:
Вероятность дождя устанавливается как 100%, если дождь идёт сейчас.

Влияние: Значения корректно отображаются на основе доступных данных API.

5. Ошибка: Некорректный формат ответа API

Причина: Ответ API не содержит ожидаемых ключей.


    wind_speed = current_data.get("Wind", {}).get("Speed", {}).get("Metric", {}).get("Value", 0)



Влияние: Система корректно обрабатывает неполные данные и отображает значения 0 или N/A.

Как тестировалась система

Тестирование ввода:

- Пустые поля: корректное сообщение об ошибке.

- Некорректные названия городов: выводится сообщение "Город не найден".

Тестирование API:

- Отсутствие сети или неверный API-ключ.

- Проверка структур ответа API при различных погодных условиях.

Проверка крайних случаев:

- Вероятность дождя = 100%, если идёт дождь сейчас.
- Температуры ниже -30°C и выше 35°C.
- Скорость ветра > 50 км/ч.

Проект корректно обрабатывает ошибки и остаётся устойчивым при некорректном вводе данных и проблемах с API. Пользователь получает понятные сообщения об ошибках и достоверные прогнозы погоды для заданного маршрута.